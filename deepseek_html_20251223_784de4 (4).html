<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nhị thức Newton - Toán lớp 10</title>
    
    <!-- MathJax để hiển thị công thức toán học -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <!-- Font Google -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Noto+Sans+Math&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f9f9f9;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
            overflow-x: hidden; /* Ngăn tràn ngang toàn trang */
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            border-radius: 12px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            color: white;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            font-weight: 300;
            opacity: 0.9;
        }
        
        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .main-content {
            flex: 3;
            min-width: 300px;
            max-width: 100%;
            overflow-x: hidden; /* Ngăn tràn trong nội dung chính */
        }
        
        .sidebar {
            flex: 1;
            min-width: 250px;
            background-color: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            max-width: 100%;
        }
        
        .section {
            background-color: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            max-width: 100%;
            overflow: hidden; /* Ngăn tràn trong section */
        }
        
        .section:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }
        
        h2 {
            color: #2575fc;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
            font-size: 1.8rem;
            word-wrap: break-word;
        }
        
        h3 {
            color: #6a11cb;
            margin: 15px 0 10px;
            font-size: 1.4rem;
            word-wrap: break-word;
        }
        
        p {
            margin-bottom: 15px;
            font-size: 1.05rem;
            word-wrap: break-word;
        }
        
        .formula {
            background-color: #f8f9fa;
            border-left: 4px solid #2575fc;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
            font-family: 'Noto Sans Math', sans-serif;
            overflow-x: auto; /* Cho phép cuộn ngang nếu công thức quá dài */
            overflow-y: hidden;
            max-width: 100%;
            -webkit-overflow-scrolling: touch; /* Cuộn mượt trên mobile */
        }
        
        .formula.large {
            font-size: 1.3rem;
            text-align: center;
            padding: 25px;
        }
        
        .formula::-webkit-scrollbar {
            height: 8px;
        }
        
        .formula::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        
        .formula::-webkit-scrollbar-thumb {
            background: #2575fc;
            border-radius: 4px;
        }
        
        .formula::-webkit-scrollbar-thumb:hover {
            background: #6a11cb;
        }
        
        .example {
            background-color: #e8f4fd;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            max-width: 100%;
            overflow: hidden;
        }
        
        .highlight {
            background-color: #fff3cd;
            padding: 3px 6px;
            border-radius: 4px;
            font-weight: 500;
            display: inline-block;
            max-width: 100%;
            word-wrap: break-word;
        }
        
        .note {
            background-color: #f0f7ff;
            border-left: 4px solid #6a11cb;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
            max-width: 100%;
            word-wrap: break-word;
        }
        
        ul, ol {
            margin-left: 25px;
            margin-bottom: 20px;
            max-width: 100%;
        }
        
        li {
            margin-bottom: 8px;
            word-wrap: break-word;
        }
        
        .sidebar h3 {
            color: #2575fc;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .menu {
            list-style-type: none;
            margin-left: 0;
        }
        
        .menu li {
            margin-bottom: 10px;
        }
        
        .menu a {
            display: block;
            padding: 12px 15px;
            background-color: #f0f7ff;
            border-radius: 8px;
            text-decoration: none;
            color: #333;
            transition: all 0.3s ease;
            border-left: 3px solid #2575fc;
            word-wrap: break-word;
            overflow: hidden;
        }
        
        .menu a:hover {
            background-color: #2575fc;
            color: white;
            transform: translateX(5px);
        }
        
        .calculator {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            max-width: 100%;
            overflow: hidden;
        }
        
        .calculator h4 {
            margin-bottom: 15px;
            color: #6a11cb;
            text-align: center;
        }
        
        .input-group {
            margin-bottom: 15px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .input-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            max-width: 100%;
            box-sizing: border-box;
        }
        
        .input-group small {
            display: block;
            margin-top: 5px;
            color: #666;
            font-size: 0.85rem;
        }
        
        button {
            background: linear-gradient(to right, #6a11cb, #2575fc);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 6px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            max-width: 100%;
            box-sizing: border-box;
            width: 100%;
        }
        
        button:hover {
            opacity: 0.9;
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
        }
        
        #result {
            margin-top: 20px;
            padding: 15px;
            background-color: white;
            border-radius: 8px;
            border: 1px solid #eee;
            font-family: 'Noto Sans Math', sans-serif;
            min-height: 60px;
            display: none;
            max-width: 100%;
            overflow-x: auto;
            word-wrap: break-word;
        }
        
        .error-message {
            color: #dc3545;
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
            border-radius: 6px;
            padding: 10px;
            margin-top: 10px;
            display: none;
            font-size: 0.9rem;
        }
        
        /* Phần bài tập trắc nghiệm */
        .quiz-section {
            margin-top: 30px;
            max-width: 100%;
            overflow: hidden;
        }
        
        .question {
            background-color: #fff;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            border-left: 4px solid #6a11cb;
            max-width: 100%;
            overflow: hidden;
        }
        
        .question-number {
            display: inline-block;
            background: #6a11cb;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            margin-right: 10px;
            font-weight: bold;
        }
        
        .question-text {
            font-weight: 500;
            margin-bottom: 15px;
            font-size: 1.1rem;
            word-wrap: break-word;
            display: inline-block;
            max-width: calc(100% - 50px);
            vertical-align: middle;
        }
        
        .options {
            margin-left: 40px;
            max-width: 100%;
        }
        
        .option {
            margin-bottom: 12px;
            padding: 10px;
            border-radius: 6px;
            transition: background-color 0.2s;
            cursor: pointer;
            max-width: 100%;
            overflow: hidden;
            word-wrap: break-word;
        }
        
        .option:hover {
            background-color: #f0f7ff;
        }
        
        .option.selected {
            background-color: #e1f0ff;
            border: 1px solid #2575fc;
        }
        
        .option.correct {
            background-color: #d4edda;
            border: 1px solid #28a745;
        }
        
        .option.incorrect {
            background-color: #f8d7da;
            border: 1px solid #dc3545;
        }
        
        .option input {
            margin-right: 10px;
            transform: scale(1.2);
        }
        
        .option label {
            cursor: pointer;
            font-family: 'Noto Sans Math', sans-serif;
            max-width: calc(100% - 30px);
            display: inline-block;
            vertical-align: middle;
            word-wrap: break-word;
        }
        
        .quiz-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
            max-width: 100%;
        }
        
        .quiz-controls button {
            padding: 12px 25px;
            min-width: 150px;
            width: auto;
        }
        
        #check-answers {
            background: linear-gradient(to right, #28a745, #20c997);
        }
        
        #reset-quiz {
            background: linear-gradient(to right, #6c757d, #adb5bd);
        }
        
        #quiz-results {
            margin-top: 25px;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.2rem;
            font-weight: 500;
            display: none;
            max-width: 100%;
            word-wrap: break-word;
        }
        
        #quiz-results.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        #quiz-results.fail {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
            border-top: 1px solid #eee;
            max-width: 100%;
            word-wrap: break-word;
        }
        
        /* Phần mới: Khai triển với các số mũ */
        .expansion-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
        
        .expansion-item {
            background-color: #f0f7ff;
            border-radius: 10px;
            padding: 20px;
            border: 1px solid #d1e7ff;
        }
        
        .expansion-item h4 {
            color: #6a11cb;
            margin-bottom: 15px;
            text-align: center;
            font-size: 1.2rem;
        }
        
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .section {
                padding: 20px;
            }
            
            .quiz-controls {
                flex-direction: column;
                align-items: center;
            }
            
            .quiz-controls button {
                width: 100%;
                max-width: 300px;
            }
            
            .expansion-grid {
                grid-template-columns: 1fr;
            }
            
            .question-text {
                max-width: calc(100% - 40px);
            }
            
            .formula.large {
                font-size: 1.1rem;
                padding: 15px;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .section {
                padding: 15px;
            }
            
            .formula {
                padding: 15px;
            }
            
            .question-text {
                font-size: 1rem;
                max-width: calc(100% - 40px);
            }
            
            .options {
                margin-left: 20px;
            }
        }
    </style>
    
    <script>
        // Cấu hình MathJax
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
                enableMenu: false // Tắt menu để tối ưu hiển thị trên mobile
            },
            startup: {
                ready: () => {
                    MathJax.startup.defaultReady();
                    MathJax.startup.promise.then(() => {
                        console.log('MathJax đã tải xong');
                    });
                }
            }
        };
    </script>
</head>
<body>
    <header>
        <h1>Nhị Thức Newton</h1>
        <p class="subtitle">Công thức khai triển nhị thức và ứng dụng - Toán lớp 10</p>
    </header>
    
    <div class="container">
        <main class="main-content">
            <section class="section" id="introduction">
                <h2>Giới thiệu về Nhị thức Newton</h2>
                <p>Nhị thức Newton là một công cụ quan trọng trong đại số, cho phép khai triển lũy thừa của một tổng hai số hạng. Công thức này được đặt theo tên của nhà toán học nổi tiếng Isaac Newton.</p>
                
                <div class="formula large">
                    $$(a+b)^n = \sum_{k=0}^{n} C_n^k a^{n-k} b^k$$
                </div>
                
                <p>Trong đó $C_n^k$ là tổ hợp chập $k$ của $n$, được tính bằng công thức:</p>
                
                <div class="formula">
                    $$C_n^k = \frac{n!}{k!(n-k)!}$$
                </div>
            </section>
            
            <section class="section" id="formula">
                <h2>Công thức tổng quát</h2>
                <p>Với mọi số thực $a$, $b$ và số tự nhiên $n$, ta có:</p>
                
                <div class="formula large">
                    $$(a+b)^n = C_n^0 a^n b^0 + C_n^1 a^{n-1} b^1 + C_n^2 a^{n-2} b^2 + \cdots + C_n^n a^0 b^n$$
                </div>
                
                <p>Hoặc viết gọn lại:</p>
                
                <div class="formula">
                    $$(a+b)^n = \sum_{k=0}^{n} \binom{n}{k} a^{n-k} b^k$$
                </div>
                
                <div class="note">
                    <p><strong>Chú ý:</strong> Ký hiệu $\binom{n}{k}$ được đọc là "n chập k" và có giá trị bằng $C_n^k$.</p>
                </div>
            </section>
            
            <!-- Phần mới: Khai triển với các số mũ từ 2-5 -->
            <section class="section" id="expansions">
                <h2>Khai triển với các số mũ từ 2 đến 5</h2>
                <p>Dưới đây là các khai triển cụ thể của $(a+b)^n$ với $n = 2, 3, 4, 5$:</p>
                
                <div class="expansion-grid">
                    <div class="expansion-item">
                        <h4>Khai triển $(a+b)^2$</h4>
                        <div class="formula">
                            $$(a+b)^2 = a^2 + 2ab + b^2$$
                        </div>
                    </div>
                    
                    <div class="expansion-item">
                        <h4>Khai triển $(a+b)^3$</h4>
                        <div class="formula">
                            $$(a+b)^3 = a^3 + 3a^2b + 3ab^2 + b^3$$
                        </div>
                    </div>
                    
                    <div class="expansion-item">
                        <h4>Khai triển $(a+b)^4$</h4>
                        <div class="formula">
                            $$(a+b)^4 = a^4 + 4a^3b + 6a^2b^2 + 4ab^3 + b^4$$
                        </div>
                    </div>
                    
                    <div class="expansion-item">
                        <h4>Khai triển $(a+b)^5$</h4>
                        <div class="formula">
                            $$(a+b)^5 = a^5 + 5a^4b + 10a^3b^2 + 10a^2b^3 + 5ab^4 + b^5$$
                        </div>
                    </div>
                </div>
            </section>
            
            <section class="section" id="examples">
                <h2>Ví dụ minh họa</h2>
                
                <div class="example">
                    <h3>Ví dụ 1: Khai triển $(x+1)^4$</h3>
                    <p>Áp dụng nhị thức Newton với $a=x$, $b=1$, $n=4$:</p>
                    <div class="formula">
                        $$(x+1)^4 = \sum_{k=0}^{4} C_4^k x^{4-k} 1^k$$
                        $$ = C_4^0 x^4 + C_4^1 x^3 + C_4^2 x^2 + C_4^3 x + C_4^4$$
                        $$ = 1 \cdot x^4 + 4 \cdot x^3 + 6 \cdot x^2 + 4 \cdot x + 1$$
                        $$ = x^4 + 4x^3 + 6x^2 + 4x + 1$$
                    </div>
                </div>
                
                <div class="example">
                    <h3>Ví dụ 2: Khai triển $(2x-3)^3$</h3>
                    <p>Áp dụng nhị thức Newton với $a=2x$, $b=-3$, $n=3$:</p>
                    <div class="formula">
                        $$(2x-3)^3 = \sum_{k=0}^{3} C_3^k (2x)^{3-k} (-3)^k$$
                        $$ = C_3^0 (2x)^3 + C_3^1 (2x)^2 (-3) + C_3^2 (2x) (-3)^2 + C_3^3 (-3)^3$$
                        $$ = 1 \cdot 8x^3 + 3 \cdot 4x^2 \cdot (-3) + 3 \cdot 2x \cdot 9 + 1 \cdot (-27)$$
                        $$ = 8x^3 - 36x^2 + 54x - 27$$
                    </div>
                </div>
            </section>
            
            <section class="section" id="properties">
                <h2>Tính chất của các hệ số</h2>
                <p>Các hệ số trong khai triển nhị thức Newton có những tính chất quan trọng:</p>
                
                <ol>
                    <li><span class="highlight">Tính đối xứng</span>: $C_n^k = C_n^{n-k}$</li>
                    <li><span class="highlight">Công thức Pascal</span>: $C_n^k + C_n^{k+1} = C_{n+1}^{k+1}$</li>
                    <li><span class="highlight">Tổng các hệ số</span>: $\sum_{k=0}^{n} C_n^k = 2^n$</li>
                    <li><span class="highlight">Tổng các hệ số với dấu xen kẽ</span>: $\sum_{k=0}^{n} (-1)^k C_n^k = 0$</li>
                </ol>
                
                <p>Tam giác Pascal thể hiện các hệ số $C_n^k$:</p>
                
                <div class="formula">
                    $$
                    \begin{array}{c}
                    1 \\
                    1 \quad 1 \\
                    1 \quad 2 \quad 1 \\
                    1 \quad 3 \quad 3 \quad 1 \\
                    1 \quad 4 \quad 6 \quad 4 \quad 1 \\
                    1 \quad 5 \quad 10 \quad 10 \quad 5 \quad 1 \\
                    \end{array}
                    $$
                </div>
            </section>
            
            <section class="section" id="applications">
                <h2>Ứng dụng của Nhị thức Newton</h2>
                <ul>
                    <li>Khai triển các biểu thức đại số phức tạp</li>
                    <li>Tính toán xác suất trong tổ hợp</li>
                    <li>Chứng minh các đẳng thức tổ hợp</li>
                    <li>Ứng dụng trong xấp xỉ giá trị (khi $n$ lớn)</li>
                    <li>Giải các bài toán về hệ số trong khai triển</li>
                </ul>
                
                <div class="example">
                    <h3>Bài toán ứng dụng</h3>
                    <p>Tìm hệ số của $x^2$ trong khai triển $(2x+5)^4$.</p>
                    <p><strong>Giải:</strong> Số hạng tổng quát trong khai triển là:</p>
                    <div class="formula">
                        $$T_{k+1} = C_4^k (2x)^{4-k} 5^k = C_4^k \cdot 2^{4-k} \cdot 5^k \cdot x^{4-k}$$
                    </div>
                    <p>Để số hạng chứa $x^2$, ta cần $4-k = 2 \Rightarrow k = 2$.</p>
                    <p>Vậy hệ số của $x^2$ là: $C_4^2 \cdot 2^{2} \cdot 5^2 = 6 \cdot 4 \cdot 25 = 600$.</p>
                </div>
            </section>
            
            <!-- Phần bài tập trắc nghiệm -->
            <section class="section" id="quiz">
                <h2>Bài tập trắc nghiệm</h2>
                <p>Làm các bài tập sau để kiểm tra kiến thức về nhị thức Newton (các khai triển không vượt quá mũ 5):</p>
                
                <div class="quiz-section">
                    <!-- Câu hỏi 1 -->
                    <div class="question" id="q1">
                        <div class="question-text">
                            <span class="question-number">1</span>
                            Khai triển của $(x+2)^3$ là:
                        </div>
                        <div class="options">
                            <div class="option" onclick="selectOption('q1', 'a')">
                                <input type="radio" id="q1a" name="q1" value="a">
                                <label for="q1a">$x^3 + 6x^2 + 12x + 8$</label>
                            </div>
                            <div class="option" onclick="selectOption('q1', 'b')">
                                <input type="radio" id="q1b" name="q1" value="b">
                                <label for="q1b">$x^3 + 3x^2 + 3x + 1$</label>
                            </div>
                            <div class="option" onclick="selectOption('q1', 'c')">
                                <input type="radio" id="q1c" name="q1" value="c">
                                <label for="q1c">$x^3 + 6x^2 + 12x + 6$</label>
                            </div>
                            <div class="option" onclick="selectOption('q1', 'd')">
                                <input type="radio" id="q1d" name="q1" value="d">
                                <label for="q1d">$x^3 + 3x^2 + 6x + 8$</label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Câu hỏi 2 -->
                    <div class="question" id="q2">
                        <div class="question-text">
                            <span class="question-number">2</span>
                            Hệ số của $x^2$ trong khai triển $(2x-1)^4$ là:
                        </div>
                        <div class="options">
                            <div class="option" onclick="selectOption('q2', 'a')">
                                <input type="radio" id="q2a" name="q2" value="a">
                                <label for="q2a">$-24$</label>
                            </div>
                            <div class="option" onclick="selectOption('q2', 'b')">
                                <input type="radio" id="q2b" name="q2" value="b">
                                <label for="q2b">$24$</label>
                            </div>
                            <div class="option" onclick="selectOption('q2', 'c')">
                                <input type="radio" id="q2c" name="q2" value="c">
                                <label for="q2c">$-12$</label>
                            </div>
                            <div class="option" onclick="selectOption('q2', 'd')">
                                <input type="radio" id="q2d" name="q2" value="d">
                                <label for="q2d">$12$</label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Câu hỏi 3 -->
                    <div class="question" id="q3">
                        <div class="question-text">
                            <span class="question-number">3</span>
                            Số hạng không chứa $x$ trong khai triển $\left(x + \frac{1}{x}\right)^5$ là:
                        </div>
                        <div class="options">
                            <div class="option" onclick="selectOption('q3', 'a')">
                                <input type="radio" id="q3a" name="q3" value="a">
                                <label for="q3a">$1$</label>
                            </div>
                            <div class="option" onclick="selectOption('q3', 'b')">
                                <input type="radio" id="q3b" name="q3" value="b">
                                <label for="q3b">$5$</label>
                            </div>
                            <div class="option" onclick="selectOption('q3', 'c')">
                                <input type="radio" id="q3c" name="q3" value="c">
                                <label for="q3c">$10$</label>
                            </div>
                            <div class="option" onclick="selectOption('q3', 'd')">
                                <input type="radio" id="q3d" name="q3" value="d">
                                <label for="q3d">$20$</label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Câu hỏi 4 -->
                    <div class="question" id="q4">
                        <div class="question-text">
                            <span class="question-number">4</span>
                            Khai triển $(1-2x)^5$ có số hạng đầu tiên là:
                        </div>
                        <div class="options">
                            <div class="option" onclick="selectOption('q4', 'a')">
                                <input type="radio" id="q4a" name="q4" value="a">
                                <label for="q4a">$1 - 10x$</label>
                            </div>
                            <div class="option" onclick="selectOption('q4', 'b')">
                                <input type="radio" id="q4b" name="q4" value="b">
                                <label for="q4b">$1 - 10x + 40x^2$</label>
                            </div>
                            <div class="option" onclick="selectOption('q4', 'c')">
                                <input type="radio" id="q4c" name="q4" value="c">
                                <label for="q4c">$1$</label>
                            </div>
                            <div class="option" onclick="selectOption('q4', 'd')">
                                <input type="radio" id="q4d" name="q4" value="d">
                                <label for="q4d">$-32x^5$</label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Câu hỏi 5 -->
                    <div class="question" id="q5">
                        <div class="question-text">
                            <span class="question-number">5</span>
                            Giá trị của tổng $C_5^0 + C_5^1 + C_5^2 + C_5^3 + C_5^4 + C_5^5$ là:
                        </div>
                        <div class="options">
                            <div class="option" onclick="selectOption('q5', 'a')">
                                <input type="radio" id="q5a" name="q5" value="a">
                                <label for="q5a">$16$</label>
                            </div>
                            <div class="option" onclick="selectOption('q5', 'b')">
                                <input type="radio" id="q5b" name="q5" value="b">
                                <label for="q5b">$32$</label>
                            </div>
                            <div class="option" onclick="selectOption('q5', 'c')">
                                <input type="radio" id="q5c" name="q5" value="c">
                                <label for="q5c">$64$</label>
                            </div>
                            <div class="option" onclick="selectOption('q5', 'd')">
                                <input type="radio" id="q5d" name="q5" value="d">
                                <label for="q5d">$128$</label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Câu hỏi 6 -->
                    <div class="question" id="q6">
                        <div class="question-text">
                            <span class="question-number">6</span>
                            Khai triển $(x+y)^5$ có bao nhiêu số hạng?
                        </div>
                        <div class="options">
                            <div class="option" onclick="selectOption('q6', 'a')">
                                <input type="radio" id="q6a" name="q6" value="a">
                                <label for="q6a">$4$</label>
                            </div>
                            <div class="option" onclick="selectOption('q6', 'b')">
                                <input type="radio" id="q6b" name="q6" value="b">
                                <label for="q6b">$5$</label>
                            </div>
                            <div class="option" onclick="selectOption('q6', 'c')">
                                <input type="radio" id="q6c" name="q6" value="c">
                                <label for="q6c">$6$</label>
                            </div>
                            <div class="option" onclick="selectOption('q6', 'd')">
                                <input type="radio" id="q6d" name="q6" value="d">
                                <label for="q6d">$7$</label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Câu hỏi 7 -->
                    <div class="question" id="q7">
                        <div class="question-text">
                            <span class="question-number">7</span>
                            Hệ số của $x^3$ trong khai triển $(3x-2)^4$ là:
                        </div>
                        <div class="options">
                            <div class="option" onclick="selectOption('q7', 'a')">
                                <input type="radio" id="q7a" name="q7" value="a">
                                <label for="q7a">$-216$</label>
                            </div>
                            <div class="option" onclick="selectOption('q7', 'b')">
                                <input type="radio" id="q7b" name="q7" value="b">
                                <label for="q7b">$216$</label>
                            </div>
                            <div class="option" onclick="selectOption('q7', 'c')">
                                <input type="radio" id="q7c" name="q7" value="c">
                                <label for="q7c">$-96$</label>
                            </div>
                            <div class="option" onclick="selectOption('q7', 'd')">
                                <input type="radio" id="q7d" name="q7" value="d">
                                <label for="q7d">$96$</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="quiz-controls">
                        <button id="check-answers" onclick="checkAnswers()">Kiểm tra kết quả</button>
                        <button id="reset-quiz" onclick="resetQuiz()">Làm lại bài tập</button>
                    </div>
                    
                    <div id="quiz-results"></div>
                </div>
            </section>
        </main>
        
        <aside class="sidebar">
            <h3>Nội dung chính</h3>
            <ul class="menu">
                <li><a href="#introduction">Giới thiệu về Nhị thức Newton</a></li>
                <li><a href="#formula">Công thức tổng quát</a></li>
                <li><a href="#expansions">Khai triển với số mũ 2-5</a></li>
                <li><a href="#examples">Ví dụ minh họa</a></li>
                <li><a href="#properties">Tính chất của hệ số</a></li>
                <li><a href="#applications">Ứng dụng</a></li>
                <li><a href="#quiz">Bài tập trắc nghiệm</a></li>
            </ul>
            
            <div class="calculator">
                <h4>Máy tính nhị thức</h4>
                <p>Nhập giá trị để khai triển $(a+b)^n$:</p>
                
                <div class="input-group">
                    <label for="a">Biểu thức a:</label>
                    <input type="text" id="a" value="x" placeholder="Ví dụ: x, 2x, y, 3y, x+y">
                    <small>Nhập biểu thức với biến bất kỳ (x, y, z,...)</small>
                </div>
                
                <div class="input-group">
                    <label for="b">Biểu thức b:</label>
                    <input type="text" id="b" value="1" placeholder="Ví dụ: 1, 2y, -3z, x-2">
                    <small>Nhập biểu thức với biến bất kỳ (x, y, z,...)</small>
                </div>
                
                <div class="input-group">
                    <label for="n">Số mũ n (0 ≤ n ≤ 5):</label>
                    <input type="number" id="n" min="0" max="5" value="4">
                    <small>Chỉ hỗ trợ n từ 0 đến 5</small>
                </div>
                
                <button onclick="expandBinomial()">Khai triển</button>
                
                <div class="error-message" id="error-message"></div>
                
                <div id="result"></div>
            </div>
        </aside>
    </div>
    
    <footer>
        <p>© 2023 - Trang web về Nhị thức Newton dành cho học sinh lớp 10</p>
        <p>Thiết kế với MathJax để hiển thị công thức toán học đẹp hơn</p>
    </footer>
    
    <script>
        // Hàm tính giai thừa
        function factorial(n) {
            if (n === 0 || n === 1) return 1;
            let result = 1;
            for (let i = 2; i <= n; i++) {
                result *= i;
            }
            return result;
        }
        
        // Hàm tính tổ hợp C(n, k)
        function combination(n, k) {
            if (k < 0 || k > n) return 0;
            return factorial(n) / (factorial(k) * factorial(n - k));
        }
        
        // Hàm phân tích đơn thức (số, biến, hoặc k*biến)
        function parseMonomial(expr) {
            expr = expr.trim();
            
            // Nếu là số
            if (!isNaN(expr) && expr !== '') {
                return {
                    coefficient: parseFloat(expr),
                    variable: '',
                    isNumber: true,
                    isMonomial: true
                };
            }
            
            // Nếu là biến đơn
            if (/^[a-zA-Z]$/.test(expr)) {
                return {
                    coefficient: 1,
                    variable: expr,
                    isNumber: false,
                    isMonomial: true
                };
            }
            
            // Nếu là dạng k*biến
            const match = expr.match(/^(-?\d*\.?\d*)([a-zA-Z]+)$/);
            if (match) {
                const coeffStr = match[1];
                const variable = match[2];
                
                let coefficient;
                if (coeffStr === '' || coeffStr === '-') {
                    coefficient = coeffStr === '-' ? -1 : 1;
                } else {
                    coefficient = parseFloat(coeffStr);
                }
                
                return {
                    coefficient: coefficient,
                    variable: variable,
                    isNumber: false,
                    isMonomial: true
                };
            }
            
            // Biểu thức phức tạp (có + hoặc -)
            return {
                expression: expr,
                isMonomial: false,
                isComplex: true
            };
        }
        
        // Hàm tính lũy thừa cho đơn thức
        function powerMonomial(monomial, power) {
            if (power === 0) {
                return { coefficient: 1, variable: '', isNumber: true, isMonomial: true };
            }
            
            if (power === 1) {
                return monomial;
            }
            
            if (monomial.isNumber) {
                return {
                    coefficient: Math.pow(monomial.coefficient, power),
                    variable: '',
                    isNumber: true,
                    isMonomial: true
                };
            } else {
                return {
                    coefficient: Math.pow(monomial.coefficient, power),
                    variable: monomial.variable,
                    isNumber: false,
                    isMonomial: true,
                    power: power
                };
            }
        }
        
        // Hàm định dạng đơn thức để hiển thị
        function formatMonomial(monomial) {
            if (monomial.coefficient === 0) {
                return '0';
            }
            
            const absCoeff = Math.abs(monomial.coefficient);
            const sign = monomial.coefficient < 0 ? '-' : '';
            
            if (monomial.isNumber) {
                return sign + absCoeff;
            }
            
            let result = '';
            
            if (absCoeff === 1) {
                result = sign + monomial.variable;
            } else {
                result = sign + absCoeff + monomial.variable;
            }
            
            // Thêm số mũ nếu có
            if (monomial.power && monomial.power > 1) {
                result += `^{${monomial.power}}`;
            }
            
            return result;
        }
        
        // Hàm khai triển nhị thức hỗ trợ biến khác nhau
        function expandBinomial() {
            const aInput = document.getElementById('a').value.trim() || 'a';
            const bInput = document.getElementById('b').value.trim() || 'b';
            const n = parseInt(document.getElementById('n').value);
            
            const errorMsg = document.getElementById('error-message');
            errorMsg.style.display = 'none';
            
            if (isNaN(n) || n < 0 || n > 5) {
                errorMsg.textContent = 'Vui lòng nhập n là số nguyên từ 0 đến 5';
                errorMsg.style.display = 'block';
                return;
            }
            
            // Phân tích a và b
            const aParsed = parseMonomial(aInput);
            const bParsed = parseMonomial(bInput);
            
            let result;
            
            // Xử lý theo từng trường hợp
            if (aParsed.isMonomial && bParsed.isMonomial) {
                // Cả hai đều là đơn thức
                result = expandMonomialBinomial(aParsed, bParsed, n, aInput, bInput);
            } else if (aParsed.isComplex || bParsed.isComplex) {
                // Có ít nhất một biểu thức phức tạp
                result = expandComplexBinomial(aInput, bInput, n);
            } else {
                result = expandComplexBinomial(aInput, bInput, n);
            }
            
            displayResult(result);
        }
        
        // Hàm khai triển cho hai đơn thức
        function expandMonomialBinomial(aMono, bMono, n, aInput, bInput) {
            if (n === 0) {
                return `$$(${aInput} + ${bInput})^{0} = 1$$`;
            }
            
            if (n === 1) {
                return `$$(${aInput} + ${bInput})^{1} = ${aInput} + ${bInput}$$`;
            }
            
            let terms = [];
            
            for (let k = 0; k <= n; k++) {
                const coeff = combination(n, k);
                if (coeff === 0) continue;
                
                const powerA = n - k;
                const powerB = k;
                
                // Tính a^(n-k)
                const aTerm = powerMonomial(aMono, powerA);
                
                // Tính b^k
                const bTerm = powerMonomial(bMono, powerB);
                
                // Tính hệ số tổng
                let termCoeff = coeff * aTerm.coefficient * bTerm.coefficient;
                
                if (termCoeff === 0) continue;
                
                // Xây dựng phần biến
                let variablePart = '';
                
                if (!aTerm.isNumber && !bTerm.isNumber) {
                    // Cả hai đều có biến, có thể khác biến
                    const aVarPart = aTerm.variable ? 
                        (aTerm.power ? `${aTerm.variable}^{${aTerm.power}}` : aTerm.variable) : '';
                    const bVarPart = bTerm.variable ? 
                        (bTerm.power ? `${bTerm.variable}^{${bTerm.power}}` : bTerm.variable) : '';
                    
                    if (aVarPart && bVarPart) {
                        variablePart = aVarPart + '\\cdot ' + bVarPart;
                    } else {
                        variablePart = aVarPart + bVarPart;
                    }
                } else if (!aTerm.isNumber) {
                    // Chỉ a có biến
                    variablePart = aTerm.power ? `${aTerm.variable}^{${aTerm.power}}` : aTerm.variable;
                } else if (!bTerm.isNumber) {
                    // Chỉ b có biến
                    variablePart = bTerm.power ? `${bTerm.variable}^{${bTerm.power}}` : bTerm.variable;
                }
                
                // Xây dựng số hạng
                let term = '';
                const absCoeff = Math.abs(termCoeff);
                const sign = termCoeff < 0 ? '-' : (terms.length > 0 ? '+' : '');
                
                if (sign) term += sign + ' ';
                
                if (absCoeff !== 1 || !variablePart) {
                    term += absCoeff;
                }
                
                if (variablePart) {
                    if (absCoeff !== 1) term += '\\cdot ';
                    term += variablePart;
                }
                
                terms.push(term);
            }
            
            const expression = `(${aInput} + ${bInput})^{${n}}`;
            const expansion = terms.join(' ');
            
            return `$$${expression} = ${expansion}$$`;
        }
        
        // Hàm khai triển cho biểu thức phức tạp
        function expandComplexBinomial(aInput, bInput, n) {
            const aFormatted = formatForDisplay(aInput);
            const bFormatted = formatForDisplay(bInput);
            
            if (n === 0) {
                return `$$(${aFormatted} + ${bFormatted})^{0} = 1$$`;
            }
            
            if (n === 1) {
                return `$$(${aFormatted} + ${bFormatted})^{1} = ${aFormatted} + ${bFormatted}$$`;
            }
            
            let terms = [];
            
            for (let k = 0; k <= n; k++) {
                const coeff = combination(n, k);
                if (coeff === 0) continue;
                
                const powerA = n - k;
                const powerB = k;
                
                let term = '';
                
                // Thêm hệ số
                if (coeff !== 1) {
                    term += coeff;
                }
                
                // Thêm a^(n-k)
                if (powerA > 0) {
                    if (term) term += '\\cdot ';
                    const aPart = formatWithParentheses(aInput);
                    if (powerA === 1) {
                        term += aPart;
                    } else {
                        term += `${aPart}^{${powerA}}`;
                    }
                }
                
                // Thêm b^k
                if (powerB > 0) {
                    if (term) term += '\\cdot ';
                    const bPart = formatWithParentheses(bInput);
                    if (powerB === 1) {
                        term += bPart;
                    } else {
                        term += `${bPart}^{${powerB}}`;
                    }
                }
                
                if (!term) term = '1';
                
                terms.push(term);
            }
            
            const expression = `(${aFormatted} + ${bFormatted})^{${n}}`;
            
            return `$$${expression} = ${terms.join(' + ')}$$`;
        }
        
        // Hàm định dạng để hiển thị
        function formatForDisplay(expr) {
            expr = expr.trim();
            
            // Thay thế * thành \cdot cho đẹp
            expr = expr.replace(/\*/g, '\\cdot ');
            
            return expr;
        }
        
        // Thêm ngoặc nếu cần
        function formatWithParentheses(expr) {
            expr = expr.trim();
            
            // Không cần ngoặc nếu là số, biến đơn, hoặc k*biến
            if (!isNaN(expr) || 
                /^[a-zA-Z]$/.test(expr) || 
                /^-?\d*\.?\d*[a-zA-Z]+$/.test(expr)) {
                return expr;
            }
            
            // Cần ngoặc nếu có + hoặc - (trừ dấu âm ở đầu)
            if ((expr.includes('+') || (expr.includes('-') && expr.indexOf('-') > 0)) 
                && !expr.startsWith('(')) {
                return `(${expr})`;
            }
            
            return expr;
        }
        
        // Hiển thị kết quả
        function displayResult(result) {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = result;
            resultDiv.style.display = 'block';
            
            // Render lại MathJax
            if (window.MathJax) {
                MathJax.typesetPromise([resultDiv]).catch(err => {
                    console.log('MathJax typeset error:', err);
                    const errorMsg = document.getElementById('error-message');
                    errorMsg.textContent = 'Lỗi hiển thị công thức. Vui lòng kiểm tra lại đầu vào.';
                    errorMsg.style.display = 'block';
                });
            }
        }
        
        // Khai triển mặc định khi trang được tải
        document.addEventListener('DOMContentLoaded', function() {
            expandBinomial();
        });
        
        // Phần bài tập trắc nghiệm
        const correctAnswers = {
            'q1': 'a',  // x^3 + 6x^2 + 12x + 8
            'q2': 'b',  // 24
            'q3': 'c',  // 10
            'q4': 'b',  // 1 - 10x + 40x^2
            'q5': 'b',  // 32
            'q6': 'c',  // 6
            'q7': 'a'   // -216
        };
        
        // Hàm chọn đáp án
        function selectOption(questionId, option) {
            const question = document.getElementById(questionId);
            const options = question.querySelectorAll('.option');
            
            // Xóa tất cả lớp selected trước đó
            options.forEach(opt => {
                opt.classList.remove('selected');
                opt.querySelector('input').checked = false;
            });
            
            // Thêm lớp selected cho option được chọn
            const selectedOption = question.querySelector(`.option input[value="${option}"]`).parentElement;
            selectedOption.classList.add('selected');
            selectedOption.querySelector('input').checked = true;
        }
        
        // Hàm kiểm tra kết quả
        function checkAnswers() {
            let score = 0;
            const totalQuestions = Object.keys(correctAnswers).length;
            
            // Kiểm tra từng câu hỏi
            for (const [questionId, correctAnswer] of Object.entries(correctAnswers)) {
                const question = document.getElementById(questionId);
                const selectedInput = question.querySelector('input:checked');
                
                if (selectedInput) {
                    const selectedAnswer = selectedInput.value;
                    const selectedOption = selectedInput.parentElement;
                    
                    // Xóa các lớp trạng thái cũ
                    selectedOption.classList.remove('correct', 'incorrect');
                    
                    // Kiểm tra đúng/sai
                    if (selectedAnswer === correctAnswer) {
                        selectedOption.classList.add('correct');
                        score++;
                    } else {
                        selectedOption.classList.add('incorrect');
                        
                        // Hiển thị đáp án đúng
                        const correctOption = question.querySelector(`.option input[value="${correctAnswer}"]`).parentElement;
                        correctOption.classList.add('correct');
                    }
                }
            }
            
            // Hiển thị kết quả
            const resultsDiv = document.getElementById('quiz-results');
            const percentage = Math.round((score / totalQuestions) * 100);
            
            if (percentage >= 70) {
                resultsDiv.className = 'success';
                resultsDiv.innerHTML = `
                    <p>Chúc mừng! Bạn đã trả lời đúng ${score}/${totalQuestions} câu (${percentage}%)</p>
                    <p>Kiến thức của bạn về nhị thức Newton rất tốt!</p>
                `;
            } else {
                resultsDiv.className = 'fail';
                resultsDiv.innerHTML = `
                    <p>Bạn đã trả lời đúng ${score}/${totalQuestions} câu (${percentage}%)</p>
                    <p>Hãy ôn tập lại lý thuyết và thử lại nhé!</p>
                `;
            }
            
            resultsDiv.style.display = 'block';
            
            // Cuộn đến kết quả
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
        }
        
        // Hàm reset bài tập
        function resetQuiz() {
            // Reset tất cả lựa chọn
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
                option.querySelector('input').checked = false;
            });
            
            // Ẩn kết quả
            const resultsDiv = document.getElementById('quiz-results');
            resultsDiv.style.display = 'none';
        }
        
        // Thêm sự kiện click cho các option (phòng trường hợp onclick không hoạt động)
        document.addEventListener('DOMContentLoaded', function() {
            const options = document.querySelectorAll('.option');
            options.forEach(option => {
                option.addEventListener('click', function(e) {
                    // Ngăn sự kiện click trên input để tránh xung đột
                    if (e.target.tagName !== 'INPUT') {
                        const input = this.querySelector('input');
                        const questionId = input.name;
                        const value = input.value;
                        selectOption(questionId, value);
                    }
                });
            });
            
            // Thêm sự kiện nhấn Enter cho các input trong máy tính
            const inputs = document.querySelectorAll('.calculator input');
            inputs.forEach(input => {
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        expandBinomial();
                    }
                });
            });
        });
    </script>
</body>
</html>